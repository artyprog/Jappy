<!doctype html>
<meta charset="utf-8">
<head>
    <style>
    body, html {
      display: flex;
      height: 100%;
      width: 100%;
      margin:0;
    }
    code-editor {
      height: 100%;
      width: 100%;
      display: flex;
      flex-direction: column;
    }
    </style>
</head>
<body>

    <code-editor></code-editor>

    <script src="node_modules/riot/riot+compiler.js"></script>
    <script src="lib/rapydscript.js"></script>
    <script src="node_modules/mustache/mustache.js"></script>

    <script src="node_modules/ace-builds/src-min-noconflict/ace.js"></script>
    <script src="node_modules/ace-builds/src-min-noconflict/theme-solarized_dark.js"></script>
    <script src="node_modules/ace-builds/src-min-noconflict/mode-python.js"></script>

    <script type="riot/tag" data-src="code_editor.tag.html"></script>
    <script>

        compiler = RapydScript.create_embedded_compiler()

        riot.parsers.js.Rapyd = function(js, options) {
          return (compiler.compile(js))
        }

        riot.compile(function() {
          // here tags are compiled and riot.mount works synchronously
          var tags = riot.mount('*')
        })

    </script>
</body>
