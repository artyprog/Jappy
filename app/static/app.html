<!doctype html>
<meta charset="utf-8">
<head>
    <style>
    #code {
        display: flex;
        flex-direction: column;
    }
    </style>
</head>    
<body>

    <code-editor></code-editor>

    <script src="node_modules/riot/riot+compiler.js"></script>
    <script src="lib/rapydscript.js"></script>

    <script src="node_modules/yjs/dist/y.js"></script>
    <script src="node_modules/y-memory/dist/y-memory.js"></script>
    <script src="node_modules/y-indexeddb/dist/y-indexeddb.js"></script>
    <script src="node_modules/y-array/dist/y-array.js"></script>
    <script src="node_modules/y-text/dist/y-text.js"></script>
    <script src="node_modules/y-webrtc/dist/y-webrtc.js"></script>

    <script src="node_modules/ace-builds/src/ace.js"></script>
    <script src="node_modules/ace-builds/src/theme-twilight.js"></script>
    <script src="node_modules/ace-builds/src/mode-python.js"></script>

    <script type="riot/tag" data-src="code_editor.html"></script>
    <script>
        
        compiler = RapydScript.create_embedded_compiler()
        
        riot.parsers.js.Rapyd = function(js, options) {
          return (compiler.compile(js))
        }

        riot.compile(function() {
          // here tags are compiled and riot.mount works synchronously
          var tags = riot.mount('*')
        })

    </script>    
</body>
